<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Footage Renamer</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: file:; media-src 'self' file: blob: data:; script-src 'self';">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="left">
      <button id="openFolderBtn" class="btn">Open Folder</button>
  <button id="loadRosterBtn" class="btn secondary">Load Roster</button>
      <div id="folderPath" class="folder-path"></div>
    </div>
    <div class="center">
      <div id="fileCounter" class="counter">0 / 0</div>
    </div>
    <div class="right">
  <button id="openDirBtn" class="btn secondary">Open Folder in Explorer</button>
      <button id="showInFolderBtn" class="btn secondary">Reveal in Finder/Explorer</button>
    </div>
  </header>

  <main class="main">
    <div class="viewer">
      <video id="video" preload="metadata" playsinline></video>

      <div class="overlay rename-overlay hidden" id="renameOverlay">
        <div class="rename-card">
          <div class="rename-label">Rename (keep extension auto):</div>
          <input id="renameInput" type="text" spellcheck="false" />
          <div class="hint">Press Enter to save • Esc to cancel</div>
        </div>
      </div>

      <div class="overlay rename-overlay hidden" id="tagOverlay">
        <div class="rename-card">
          <div class="rename-label">Tag Players (type jersey number, comma to add multiple, Enter to confirm):</div>
          <input id="tagInput" type="text" spellcheck="false" autocomplete="off" />
          <div id="currentTags" class="tag-pills"></div>
          <div id="tagSuggestions" class="suggestions"></div>
          <div class="hint">T to open • Space play/pause • Esc cancel • Enter finish tags • Use number to filter, click to add</div>
        </div>
      </div>

      <div class="overlay rename-overlay hidden" id="detailsOverlay">
        <div class="rename-card">
          <div class="rename-label">Extra Details (enter descriptor, then Enter to finish):</div>
          <input id="detailsInput" type="text" spellcheck="false" autocomplete="off" />
          <div class="hint">Esc to cancel • Leave blank to skip extra details</div>
        </div>
      </div>

      <div class="controls">
        <div class="row">
          <button id="prevBtn" class="btn">⟵ Prev</button>
          <button id="playPauseBtn" class="btn">Play</button>
          <button id="muteBtn" class="btn">Mute</button>
          <button id="nextBtn" class="btn">Next ⟶</button>
          <button id="deleteBtn" class="btn" style="margin-left:auto;background:#40222a;border-color:#5a2a34;">Delete</button>
        </div>

        <div class="row progress">
          <div id="currentName" class="filename">No file loaded</div>
          <div class="time">
            <span id="currentTime">00:00</span>
            <input id="seek" type="range" min="0" max="100" step="0.01" value="0" />
            <span id="duration">00:00</span>
          </div>
        </div>

        <div class="row tips">
          <span>Shortcuts: Enter tag → details → rename • T tag directly • ←/→ navigate • Space play/pause • Esc cancel</span>
        </div>
      </div>
    </div>
  </main>

  

  <div id="toast" class="toast hidden"></div>

  <!-- Splash overlay with two-step onboarding -->
  <div id="splashOverlay" class="splash-overlay">
    <div class="splash-card">
      <h1 class="splash-title">Welcome to the Footage Renamer</h1>
      <p class="splash-sub">A tool built by David Camick for Alabama Football</p>

      <div id="splashRosterStep" style="margin-top:12px;">
        <p class="splash-sub" style="margin-bottom:8px;">Choose a roster option</p>
        <div class="row" style="justify-content:center; gap:12px; flex-wrap:wrap;">
          <button id="splashUseBamaBtn" class="btn">Use Alabama Roster</button>
          <button id="splashImportRosterBtn" class="btn secondary">Import Custom Roster</button>
          <button id="splashSkipRosterBtn" class="btn secondary">Skip</button>
        </div>
      </div>

  <div id="splashFootageStep" class="hidden" style="margin-top:16px;">
        <p class="splash-sub" style="margin-bottom:8px;">Import footage to start</p>
        <div class="row" style="justify-content:center; gap:12px;">
          <button id="splashFootageOpenBtn" class="btn">Open Footage Folder</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>
</html>
