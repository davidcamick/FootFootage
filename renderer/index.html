<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Footage Renamer</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: file:; media-src 'self' file: blob: data:; script-src 'self';">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="left">
      <button id="openFolderBtn" class="btn">Open Folder</button>
  <button id="loadRosterBtn" class="btn secondary">Load Roster</button>
  <button id="toggleListBtn" class="btn secondary">List View</button>
      <div id="folderPath" class="folder-path"></div>
    </div>
    <div class="center">
      <div id="fileCounter" class="counter">0 / 0</div>
    </div>
    <div class="right">
  <button id="openDirBtn" class="btn secondary">Open Folder in Explorer</button>
      <button id="showInFolderBtn" class="btn secondary">Reveal in Finder/Explorer</button>
    </div>
  </header>

  <main class="main">
    <div class="viewer">
      <video id="video" preload="metadata" playsinline></video>

      <div class="overlay rename-overlay hidden" id="renameOverlay">
        <div class="rename-card">
          <div class="rename-label">Rename (keep extension auto):</div>
          <input id="renameInput" type="text" spellcheck="false" />
          <div class="hint">Press Enter to save • Esc to cancel</div>
        </div>
      </div>

      <div class="overlay rename-overlay hidden" id="tagOverlay">
        <div class="rename-card">
          <div class="rename-label">Tag Players (type number or name; comma to add multiple; Enter to confirm):</div>
          <input id="tagInput" type="text" spellcheck="false" autocomplete="off" />
          <div id="currentTags" class="tag-pills"></div>
          <div id="tagSuggestions" class="suggestions"></div>
          <div class="hint">T to open • Space play/pause • Esc cancel • Enter finish tags • Type number or first/last name, click to add</div>
        </div>
      </div>

      <div class="overlay rename-overlay hidden" id="detailsOverlay">
        <div class="rename-card">
          <div class="rename-label">Extra Details (enter descriptor, then Enter to finish):</div>
          <input id="detailsInput" type="text" spellcheck="false" autocomplete="off" />
          <div class="hint">Esc to cancel • Leave blank to skip extra details</div>
        </div>
      </div>

      <div class="controls">
        <div class="row">
          <button id="prevBtn" class="btn">⟵ Prev</button>
          <button id="playPauseBtn" class="btn">Play</button>
          <button id="muteBtn" class="btn">Mute</button>
          <button id="nextBtn" class="btn">Next ⟶</button>
          <button id="deleteBtn" class="btn" style="margin-left:auto;background:#40222a;border-color:#5a2a34;">Delete</button>
        </div>

        <div class="row progress">
          <div id="currentName" class="filename">No file loaded</div>
          <div class="time">
            <span id="currentTime">00:00</span>
            <input id="seek" type="range" min="0" max="100" step="0.01" value="0" />
            <span id="duration">00:00</span>
          </div>
        </div>

        <div class="row tips">
          <span>Shortcuts: Enter tag → details → rename • T tag directly • ←/→ navigate • , / . frame by frame • Space play/pause • Esc cancel</span>
        </div>
      </div>
    </div>
  </main>

  

  <div id="toast" class="toast hidden"></div>

  <!-- Separate List View Page -->
  <aside id="listPanel" class="list-panel hidden" aria-label="List View Page">
    <div class="list-head">
      <input id="listSearchInput" type="text" placeholder="Search filename..." spellcheck="false" />
      <select id="listSortSelect">
        <option value="name">Name</option>
        <option value="size">Size</option>
        <option value="mtime">Modified</option>
        <option value="ext">Extension</option>
      </select>
      <select id="listSortDir">
        <option value="asc">Asc</option>
        <option value="desc">Desc</option>
      </select>
      <button id="clearFiltersBtn" class="btn secondary">Clear</button>
      <button id="closeListBtn" class="btn" style="margin-left:auto">Close</button>
    </div>
    <div class="list-filters">
      <div class="field small">
        <label>Size (MB)</label>
        <div class="row">
          <input id="listSizeMin" type="number" inputmode="numeric" min="0" placeholder="min" />
          <input id="listSizeMax" type="number" inputmode="numeric" min="0" placeholder="max" />
        </div>
      </div>
      <div class="field small">
        <label>Extensions</label>
        <div id="listExtContainer" class="ext-pills"></div>
      </div>
      <label class="checkbox"><input id="listHasTagsCheckbox" type="checkbox" /> Has tags</label>
      <div class="spacer"></div>
      <div id="listCountEl" class="muted small"></div>
    </div>
    <div id="fileListContainer" class="file-list"></div>
  </aside>

  <!-- Splash overlay with multi-step onboarding flow -->
  <div id="splashOverlay" class="splash-overlay hidden">
    <div class="splash-card">
      <div class="splash-progress">
        <span class="dot" data-step="0"></span>
        <span class="dot" data-step="1"></span>
        <span class="dot" data-step="2"></span>
        <span class="dot" data-step="3"></span>
      </div>

      <div class="onboard-steps">
        <!-- Step 1: Welcome -->
        <section class="onboard-step" data-step="0">
          <h1 class="splash-title">Welcome to Footage Renamer</h1>
          <p class="splash-sub">Built by David Camick to label football footage in minutes instead of hours</p>
          <ul class="splash-list">
            <li>Load a roster for smart tag suggestions.</li>
            <li>Type jersey numbers to tag; Enter to confirm.</li>
            <li>Auto-append last names to filenames.</li>
          </ul>
          <div class="splash-actions">
            <button id="splashStartBtn" class="btn">Get Started</button>
          </div>
        </section>

        <!-- Step 2: Roster -->
        <section class="onboard-step" data-step="1">
          <h2 class="splash-title">Load a roster (optional)</h2>
          <p class="splash-sub">Pick one of the options below to enable smart tag suggestions.</p>

          <div class="choice-grid">
            <div class="option-card">
              <div class="option-head">
                <h3>Use Alabama Roster</h3>
                <p class="muted">Preloaded 2025 Alabama roster. Great for a quick try.</p>
              </div>
              <div class="option-actions">
                <button id="splashUseBamaBtn" class="btn">Use Alabama Roster</button>
              </div>
            </div>

            <div class="option-card">
              <div class="option-head">
                <h3>Import Custom Roster</h3>
                <p class="muted">Load your own JSON roster file. You can start from a template.</p>
              </div>
              <div class="option-actions" style="gap:10px;">
                <button id="splashImportRosterBtn" class="btn">Import Custom Roster</button>
                <button id="copyRosterTemplateBtn" class="btn secondary">Copy Roster Template</button>
              </div>
            </div>
          </div>

          <div class="splash-actions">
            <button id="splashSkipRosterBtn" class="btn btn-link">Skip for now</button>
          </div>
        </section>

        <!-- Step 3: Shortcuts -->
        <section class="onboard-step" data-step="2">
          <h2 class="splash-title">Fast controls</h2>
          <div class="shortcuts-grid">
            <div><span class="kbd">Space</span> Play / Pause</div>
            <div><span class="kbd">←/→</span> Previous / Next clip</div>
            <div><span class="kbd">, / .</span> Frame backward / forward</div>
            <div><span class="kbd">T</span> Tag players</div>
            <div><span class="kbd">Enter</span> Confirm tags → details → rename</div>
            <div><span class="kbd">Esc</span> Cancel current overlay</div>
            <div><span class="kbd">⌘</span> + Scroll Zoom, Drag to Pan, Double‑click reset</div>
          </div>
          <div class="splash-actions">
            <button id="splashShortcutsContinueBtn" class="btn">Continue</button>
          </div>
        </section>

        <!-- Step 4: Pick Footage -->
        <section class="onboard-step" data-step="3">
          <h2 class="splash-title">Import your footage</h2>
          <p class="splash-sub">Pick a folder with video files to begin.</p>
          <button id="splashFootageOpenBtn" class="btn">Open Footage Folder</button>
          <p class="splash-hint">You can also use the “Open Folder” button in the top bar later.</p>
        </section>
      </div>

      
    </div>
  </div>

  <script type="module" src="./renderer.js"></script>
</body>
</html>
